<?xml version="1.0" encoding="UTF-8"?>
<cheatsheet
      title="Inspecting the Generated Code">
   <intro>
      <description>
        This section shows how to use the IncQuery project. The first part describes how to generate a sample code, and use it to query an instance model. The second part describes how to use the generated code.
  <br/><br/>
For a more complex example, refer to the distributed Papyrus demo. Besides the Sample UI project, the org.eclipse.viatra2.emf.incquery.demo.papyrus project also provides an example of using generated pattern matchers.</description>
   </intro>
   <item
         title="Run queries using the Sample UI project">
      <description>
      </description>
      <subitem
            label="To create the Sample UI project, right click on models/generator.incquery, and issue EMF-IncQuery | Generate Sample UI project for EMF-IncQuery.">
      </subitem>
      <subitem
            label="Create an EMF instance model. Following the library example, start a runtime Eclipse that contains the editor plug-in. Create a new Library Model, and select Library as the Model Object (root element).">
      </subitem>
      <subitem
            label="Fill up your model with writers and books, also associate some books to writers through the writers&apos; books reference. Finally save the model.">
      </subitem>
      <subitem
            label="Right click on the model file, and issue a command from the Sample EMF-IncQuery Queries category. This returns the pattern result in a pop up message box.">
      </subitem>
   </item>
   <item
         title="Information on using the generated pattern matcher code">
      <description>
      </description>
      <subitem
            label="To use the generated EMF-IncQuery pattern matchers, either create your own plug-in project and add a dependency on the generated EMF-IncQuery plug-in (the EMF plug-ins corresponding to the referenced metamodels are automatically re-exported and made available to your code), or simply put your own code in the src/ folder of the generated project.">
      </subitem>
      <subitem
            label="To match a pattern on an EMF instance model, find the corresponding generated class from src-gen/patternmatchers/ and instantiate it with your EMF ResourceSet. The object will have useful methods such as getAllMatches(), some of them declared in the class itself, some of them in the interface IncQueryMatcher. Refer to the Javadoc on method usage.">
      </subitem>
      <subitem
            label="During the lifetime of the ResourceSet, the match sets will be incrementally maintained and therefore the pattern match retriever methods of the matcher object always return the up-to-date results virtually instantly. The actual (&quot;heavy&quot;) pattern matcher is constructed behind the scenes. The generated matcher class is only a lightweight wrapper; therefore you can instantiate it for the same ResourceSet multiple times without significant performance penalties.">
      </subitem>
      <subitem
            label="Altogether, the public pattern query API can be used very simply to: (1) Initialize an incremental pattern matcher on any Notifier (Resource, ResourceSet, or EMF elements representing their respective containment subtrees). (2) Execute a query any time on the model, retrieving the result set immediately (3) Register a delta monitor to incrementally and efficiently track changes in the result sets of queries.">
      </subitem>
   </item>
</cheatsheet>
